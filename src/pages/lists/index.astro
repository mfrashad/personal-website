---
import Layout from '@layouts/Layout.astro';
import Grid from '@components/Grid.astro';
import GridBox from '@components/GridBox.astro';
import SectionContent from '@components/SectionContent.astro';
import { Icon } from 'astro-icon/components';
import { favoriteProducts } from '@data/lists/favorite-products';
import { favoriteSoftware } from '@data/lists/favorite-software';
import { favoritePodcasts } from '@data/lists/favorite-podcasts';
import { favoriteBlogs } from '@data/lists/favorite-blogs';
import { favoriteGames } from '@data/lists/favorite-games';
import { favoriteMusic } from '@data/lists/favorite-music';
import { favoritePeople } from '@data/lists/favorite-people';
import { favoriteAnime } from '@data/lists/favorite-anime';
import { favoriteNonfictionBooks } from '@data/lists/favorite-nonfiction-books';
import { favoriteNovels } from '@data/lists/favorite-novels';
import { favoriteWebnovels } from '@data/lists/favorite-webnovels';
import { favoriteConcepts } from '@data/lists/favorite-concepts';

const lists = [
    { title: 'Best Purchases', items: favoriteProducts, href: '/lists/products', icon: 'ph:shopping-bag' },
    { title: 'Favorite Software', items: favoriteSoftware, href: '/lists/software', icon: 'ph:app-window' },
    { title: 'Favorite Games', items: favoriteGames, href: '/lists/games', icon: 'ph:game-controller' },
    { title: 'Favorite Anime', items: favoriteAnime, href: '/lists/anime', icon: 'ph:television' },
    { title: 'Favorite Nonfiction Books', items: favoriteNonfictionBooks, href: '/lists/nonfiction-books', icon: 'ph:book-open' },
    { title: 'Favorite Novels', items: favoriteNovels, href: '/lists/novels', icon: 'ph:book' },
    { title: 'Favorite Web Novels', items: favoriteWebnovels, href: '/lists/webnovels', icon: 'ph:scroll' },
    { title: 'Favorite Concepts', items: favoriteConcepts, href: '/lists/concepts', icon: 'ph:lightbulb' },
    { title: 'Favorite Podcasts', items: favoritePodcasts, href: '/lists/podcasts', icon: 'ph:microphone' },
    { title: 'Favorite Blogs', items: favoriteBlogs, href: '/lists/blogs', icon: 'ph:article' },
    { title: 'Favorite Music', items: favoriteMusic, href: '/lists/music', icon: 'ph:music-notes' },
    { title: 'People Who Inspire Me', items: favoritePeople, href: '/lists/people', icon: 'ph:users' },
];
---

<Layout
    title="Lists | Rashad"
    description="My favorite products, podcasts, blogs, and more"
>
    <Grid classes="py-40">
        <GridBox desktopFull>
            <SectionContent title="Lists" classes="!px-0">
                <p>
                    Curated lists of my favorite things - from products I use daily to people who
                    inspire me. These are recommendations based on personal experience and genuine appreciation.
                </p>
            </SectionContent>

            <div class="lists-masonry my-12">
                {lists.map((list) => {
                    const comingSoon = list.items.length === 0;
                    return (
                        <div class={`list-card border border-border rounded-lg p-5 bg-surface-secondary mb-5 ${comingSoon ? 'opacity-60' : ''}`}>
                            <div class="flex items-center gap-2 mb-4">
                                <Icon name={list.icon} width={20} height={20} class="text-content-muted" />
                                <h3 class="font-semibold text-base text-content-headings">
                                    <a href={list.href} class="hover:text-blue-600 transition-colors">{list.title}</a>
                                </h3>
                                {comingSoon ? (
                                    <span class="text-xs font-medium text-amber-600 bg-amber-50 dark:bg-amber-900/30 px-2 py-0.5 rounded ml-auto">
                                        Coming soon
                                    </span>
                                ) : (
                                    <span class="text-xs font-mono text-content-subtle ml-auto">
                                        {list.items.length}
                                    </span>
                                )}
                            </div>

                            {comingSoon ? (
                                <p class="text-sm text-content-muted">
                                    This list is being curated. Check back soon!
                                </p>
                            ) : (
                                <ul class="space-y-1">
                                    {list.items.map((item: any) => {
                                        const hasDetails = item.description || (item.tags && item.tags.length > 0);
                                        return (
                                            <li class="group/item">
                                                <span class="relative inline-flex items-center gap-1 text-sm text-content-body py-0.5">
                                                    {item.url ? (
                                                        <a href={item.url} target="_blank" rel="noopener noreferrer" class="hover:text-blue-600 transition-colors inline-flex items-center gap-1">
                                                            {item.name}
                                                            <Icon name="ph:arrow-square-out" width={12} height={12} class="opacity-0 group-hover/item:opacity-100 transition-opacity" />
                                                        </a>
                                                    ) : (
                                                        <span>{item.name}</span>
                                                    )}
                                                    {hasDetails && (
                                                        <div class="item-tooltip">
                                                            {item.description && (
                                                                <div class="text-xs text-content-muted">{item.description}</div>
                                                            )}
                                                            {item.tags && item.tags.length > 0 && (
                                                                <div class="flex flex-wrap gap-1 mt-1.5">
                                                                    {item.tags.map((tag: string) => (
                                                                        <span class="text-[10px] px-1.5 py-0.5 bg-surface-tertiary text-content-subtle rounded-full font-mono">
                                                                            {tag}
                                                                        </span>
                                                                    ))}
                                                                </div>
                                                            )}
                                                        </div>
                                                    )}
                                                </span>
                                            </li>
                                        );
                                    })}
                                </ul>
                            )}
                        </div>
                    );
                })}
            </div>
        </GridBox>
    </Grid>
</Layout>

<style>
    .lists-masonry {
        columns: 1;
        column-gap: 1.25rem;
    }

    @media (min-width: 768px) {
        .lists-masonry {
            columns: 2;
        }
    }

    @media (min-width: 1024px) {
        .lists-masonry {
            columns: 3;
        }
    }

    .list-card {
        break-inside: avoid;
    }

    .group\/item {
        position: relative;
    }

    .item-tooltip {
        position: absolute;
        left: 100%;
        top: 50%;
        transform: translateY(-50%) translateX(4px);
        z-index: 50;
        width: max-content;
        max-width: 280px;
        padding: 0.5rem 0.75rem;
        background: var(--color-bg-overlay);
        border: 1px solid var(--color-border-default);
        border-radius: 0.5rem;
        box-shadow: 0 4px 12px var(--color-shadow-light);
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.15s ease, transform 0.15s ease;
        margin-left: 0.25rem;
    }

    .group\/item:hover .item-tooltip {
        opacity: 1;
        transform: translateY(-50%) translateX(0);
        pointer-events: auto;
    }
</style>
