---
import Layout from '@layouts/Layout.astro';
import Grid from '@components/Grid.astro';
import GridBox from '@components/GridBox.astro';
import SectionContent from '@components/SectionContent.astro';
import { Icon } from 'astro-icon/components';
import { favoriteProducts } from '@data/lists/favorite-products';
import { favoriteSoftware } from '@data/lists/favorite-software';
import { favoritePodcasts } from '@data/lists/favorite-podcasts';
import { favoriteBlogs } from '@data/lists/favorite-blogs';
import { favoriteGames } from '@data/lists/favorite-games';
import { favoriteMusic } from '@data/lists/favorite-music';
import { favoritePeople } from '@data/lists/favorite-people';

export async function getStaticPaths() {
    return [
        { params: { category: 'products' } },
        { params: { category: 'software' } },
        { params: { category: 'podcasts' } },
        { params: { category: 'blogs' } },
        { params: { category: 'games' } },
        { params: { category: 'music' } },
        { params: { category: 'people' } }
    ];
}

const { category } = Astro.params;

const listData: Record<string, any> = {
    products: { items: favoriteProducts, title: 'Best Purchases', icon: 'ph:shopping-bag' },
    software: { items: favoriteSoftware, title: 'Favorite Software', icon: 'ph:app-window' },
    podcasts: { items: favoritePodcasts, title: 'Favorite Podcasts', icon: 'ph:microphone' },
    blogs: { items: favoriteBlogs, title: 'Favorite Blogs', icon: 'ph:article' },
    games: { items: favoriteGames, title: 'Favorite Games', icon: 'ph:game-controller' },
    music: { items: favoriteMusic, title: 'Favorite Music', icon: 'ph:music-notes' },
    people: { items: favoritePeople, title: 'People Who Inspire Me', icon: 'ph:users' }
};

const data = listData[category || 'products'];
const items = data?.items || [];
const title = data?.title || 'List';
const icon = data?.icon || 'ph:list-bullets';
---

<Layout title={`${title} | Rashad`} description={title}>
    <Grid classes="py-40">
        <GridBox desktopFull>
            <div class="mb-6">
                <a
                    href="/lists"
                    class="inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 mb-4"
                >
                    <Icon name="ph:arrow-left" width={16} height={16} />
                    <span>Back to all lists</span>
                </a>
            </div>

            <SectionContent title={title} classes="!px-0">
                <div class="flex items-center gap-2 text-neutral-600 mb-4">
                    <Icon name={icon} width={24} height={24} />
                    <span class="font-mono text-sm">{items.length} items</span>
                </div>
            </SectionContent>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 my-12">
                {items.map((item: any) => (
                    <div class="border border-neutral-200 rounded-lg p-6 bg-white hover:shadow-md transition-all duration-300">
                        <div class="flex items-start justify-between mb-3">
                            <div class="flex-1">
                                <h3 class="font-semibold text-lg text-neutral-900 mb-2">
                                    {item.name}
                                </h3>
                                {item.description && (
                                    <p class="text-sm text-neutral-600 mb-3">
                                        {item.description}
                                    </p>
                                )}
                            </div>
                        </div>

                        {item.tags && item.tags.length > 0 && (
                            <div class="flex flex-wrap gap-1 mb-3">
                                {item.tags.map((tag: string) => (
                                    <span class="text-xs px-2 py-1 bg-neutral-100 text-neutral-600 rounded-full font-mono">
                                        {tag}
                                    </span>
                                ))}
                            </div>
                        )}

                        {item.url && (
                            <a
                                href={item.url}
                                target="_blank"
                                rel="noopener noreferrer"
                                class="inline-flex items-center gap-1 text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors group"
                            >
                                <span>Visit</span>
                                <Icon
                                    name="ph:arrow-square-out"
                                    width={16}
                                    height={16}
                                    class="transition-transform group-hover:translate-x-0.5 group-hover:-translate-y-0.5"
                                />
                            </a>
                        )}
                    </div>
                ))}
            </div>
        </GridBox>
    </Grid>
</Layout>
