---
import type { Metric } from '@data/achievements';

interface Props {
    metric: Metric;
}

const { metric } = Astro.props;

const hasMax = metric.maxValue !== undefined && metric.maxValue !== null;
const progress = hasMax ? (metric.value / metric.maxValue!) * 100 : 100;
---

<div class="metric-card border border-border rounded-lg p-4 bg-surface-secondary hover:shadow-md transition-all duration-300">
    <div class="flex items-start justify-between mb-3">
        <div class="flex-1">
            <h3 class="font-semibold text-content-headings mb-1">
                {metric.label}
            </h3>
            <div class="text-2xl font-bold text-blue-600">
                {metric.value.toLocaleString()}
                {hasMax && (
                    <span class="text-sm text-content-subtle font-normal">
                        / {metric.maxValue!.toLocaleString()}
                    </span>
                )}
                <span class="text-sm text-content-muted font-normal ml-1">
                    {metric.unit}
                </span>
            </div>
        </div>
    </div>

    {hasMax && (
        <div class="w-full bg-surface-tertiary rounded-full h-2 overflow-hidden">
            <div
                class="bg-gradient-to-r from-blue-500 to-blue-600 h-full rounded-full transition-all duration-500"
                style={`width: ${progress}%`}
            >
            </div>
        </div>
    )}

    {metric.tags && metric.tags.length > 0 && (
        <div class="flex flex-wrap gap-1 mt-3">
            {metric.tags.map((tag) => (
                <span class="text-xs px-2 py-1 bg-surface-tertiary text-content-muted rounded-full font-mono">
                    {tag}
                </span>
            ))}
        </div>
    )}
</div>

<style>
    .metric-card {
        min-height: 120px;
    }
</style>
