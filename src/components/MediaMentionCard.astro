---
import { Icon } from 'astro-icon/components';
import type { MediaMention } from '@data/media-mentions';

interface Props {
    mention: MediaMention;
}

const { mention } = Astro.props;

const typeIcons = {
    article: 'ph:newspaper',
    podcast: 'ph:microphone',
    video: 'ph:video-camera',
    interview: 'ph:chat-centered-text'
};

const typeColors = {
    article: 'bg-blue-100 text-blue-700',
    podcast: 'bg-purple-100 text-purple-700',
    video: 'bg-red-100 text-red-700',
    interview: 'bg-green-100 text-green-700'
};

const typeIcon = typeIcons[mention.type];
const typeColor = typeColors[mention.type];

// Format date
const formattedDate = new Date(mention.date).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'short',
    day: 'numeric'
});
---

<a
    href={mention.url}
    target="_blank"
    rel="noopener noreferrer"
    class="group block border border-neutral-200 rounded-lg p-6 transition-all duration-300 hover:shadow-md hover:border-neutral-300 bg-white"
>
    <div class="flex items-start justify-between mb-3">
        <div class="flex-1">
            <div class="text-xs font-mono text-neutral-500 mb-2">{formattedDate}</div>
            <h3 class="font-semibold text-lg text-neutral-900 group-hover:text-blue-600 transition-colors mb-2">
                {mention.title}
            </h3>
            <div class="text-sm font-medium text-neutral-700 mb-1">
                {mention.publication}
            </div>
        </div>
        <div class={`px-3 py-1 rounded-full text-xs font-medium ${typeColor} flex items-center gap-1 shrink-0 ml-4`}>
            <Icon name={typeIcon} width={14} height={14} />
            <span class="capitalize">{mention.type}</span>
        </div>
    </div>

    {mention.excerpt && (
        <p class="text-sm text-neutral-600 line-clamp-2">
            {mention.excerpt}
        </p>
    )}

    <div class="mt-4 flex items-center text-sm text-blue-600 group-hover:text-blue-700 font-medium">
        <span>Read more</span>
        <Icon name="ph:arrow-right" width={16} height={16} class="ml-1 transition-transform group-hover:translate-x-1" />
    </div>
</a>

<style>
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
</style>
