---
import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';

export interface Props {
    bgColor: string;
    href?: string;
    title: string;
    labels: string[];
    year: string;
    description: string;
    logo: ImageMetadata;
    logoWidth?: string;
    comingSoon?: boolean;
    customOpenString?: string;
    classes?: string;
}

const {
    bgColor,
    href,
    title,
    labels,
    year,
    logo,
    logoWidth = '4rem',
    customOpenString,
    classes,
    description,
    comingSoon = false
} = Astro.props as Props;
---

<a
    class:list={[
        classes,
        'group relative block w-full rounded-xl overflow-hidden',
        comingSoon ? 'cursor-not-allowed' : 'cursor-pointer'
    ]}
    href={href}
>
    <!-- Background Image - natural dimensions -->
    <Image
        src={logo}
        alt="project logo"
        class="h-full w-full object-cover"
    />

    <!-- Year Badge -->
    <p class="absolute right-3 top-3 z-10 rounded-full bg-white-100 px-3 py-0.5 text-xs text-white-700">
        {year}
    </p>

    <!-- Content at bottom with gradient, rounded corners, and blur - hidden by default, shown on hover -->
    <div
        class="absolute bottom-0 left-0 right-0 z-10 flex flex-col justify-end rounded-t-2xl bg-gradient-to-t from-black/90 via-black/60 to-black/30 px-3 py-2 text-white backdrop-blur-sm transition-all duration-300 lg:px-4 lg:py-3 opacity-0 translate-y-full group-hover:opacity-100 group-hover:translate-y-0 group-hover:bg-black/95"
    >
        <div>
            <h3 class="mb-1 ml-1 text-sm lg:text-base">
                {title}
            </h3>
            <ul class="flex flex-wrap gap-1 mb-1">
                {
                    labels?.map((label) => (
                        <li class="rounded-full bg-white-100 px-2 py-0.5 font-mono text-[10px] text-white-700">
                            {label}
                        </li>
                    ))
                }
            </ul>
            <p class="mt-2 text-sm text-white-700">
                {description}
            </p>
        </div>
        <div data-navLink class="mt-2 flex items-center gap-[6px] text-sm">
            {
                comingSoon ? (
                    <p class="opacity-50">Coming Soon</p>
                ) : (
                    <>
                        {customOpenString ? customOpenString : 'Open case study'}
                        <Icon name="ph:arrow-up-right-bold" width={16} />
                    </>
                )
            }
        </div>
    </div>
</a>
